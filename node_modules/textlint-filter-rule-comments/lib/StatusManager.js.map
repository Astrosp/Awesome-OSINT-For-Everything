{"version":3,"file":"StatusManager.js","names":["Object","defineProperty","exports","value","_typeof","o","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","_toPropertyKey","key","_createClass","protoProps","staticProps","t","_toPrimitive","String","r","e","toPrimitive","call","Number","StatusManager","endIndex","reportingConfig","getIgnoringMessages","_this","map","reporting","disableReporting","startNode","rulesToDisable","forEach","ruleId","push","startIndex","range","enableReporting","rulesToEnable","prevStart","start"],"sources":["../src/StatusManager.js"],"sourcesContent":["// LICENSE : MIT\n\"use strict\";\nexport default class StatusManager {\n    constructor(endIndex) {\n        /**\n         * @typedef {Object} IgnoringCommentObject\n         * @property {number|null} startIndex\n         * @property {number|null} endIndex\n         * @property {string|null} ruleId\n         */\n        /**\n         * @type {IgnoringCommentObject[]}\n         */\n        this.reportingConfig = [];\n\n        /**\n         * @type {TxtNode}\n         */\n        this.endIndex = endIndex;\n    }\n\n    getIgnoringMessages() {\n        return this.reportingConfig.map(reporting => {\n            if (reporting.endIndex === null) {\n                // [start, ?= document-end]\n                // filled with document's end\n                reporting.endIndex = this.endIndex;\n            }\n            return reporting;\n        });\n    }\n\n    /**\n     * Add data to reporting configuration to disable reporting for list of rules\n     * starting from start location\n     * @param  {Object} startNode Node to start\n     * @param  {string[]} rulesToDisable List of rules\n     * @returns {void}\n     */\n    disableReporting(startNode, rulesToDisable) {\n        const reportingConfig = this.reportingConfig;\n        if (rulesToDisable.length) {\n            rulesToDisable.forEach(function (ruleId) {\n                reportingConfig.push({\n                    startIndex: startNode.range[0],\n                    endIndex: null,\n                    ruleId: ruleId\n                });\n            });\n        } else {\n            reportingConfig.push({\n                startIndex: startNode.range[0],\n                endIndex: null,\n                ruleId: null\n            });\n        }\n    }\n\n    /**\n     * Add data to reporting configuration to enable reporting for list of rules\n     * starting from start location\n     * @param  {Object} startNode Node to start\n     * @param  {string[]} rulesToEnable List of rules\n     * @returns {void}\n     */\n    enableReporting(startNode, rulesToEnable) {\n        var i;\n        const endIndex = startNode.range[0];\n        const reportingConfig = this.reportingConfig;\n        if (rulesToEnable.length) {\n            rulesToEnable.forEach(function (ruleId) {\n                for (i = reportingConfig.length - 1; i >= 0; i--) {\n                    if (!reportingConfig[i].endIndex && reportingConfig[i].ruleId === ruleId) {\n                        reportingConfig[i].endIndex = endIndex;\n                        break;\n                    }\n                }\n            });\n        } else {\n\n            // find all previous disabled locations if they was started as list of rules\n            var prevStart;\n\n            for (i = reportingConfig.length - 1; i >= 0; i--) {\n                if (prevStart && prevStart !== reportingConfig[i].start) {\n                    break;\n                }\n\n                if (!reportingConfig[i].endIndex) {\n                    reportingConfig[i].endIndex = endIndex;\n                    prevStart = reportingConfig[i].start;\n                }\n            }\n        }\n    }\n\n}"],"mappings":"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","ignoreList":[]}